<?xml version='1.0' encoding='iso-8859-1' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core">
    <ui:define name="content">

        <h:head>
            <title>CRONOGRAMA</title>
            <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
            <link href="estilos/jsfcrud.css" type="text/css" rel="stylesheet" />
            <script type="text/javascript" src="estilos/validaciones.js"></script>
        </h:head>
        <h:body>
            <h:form  id="fr"> 
                <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />  
                <p:panel id="panel" header="CRONOGRAMA"> 
                    <h:panelGrid columns="3" cellpadding="5" id="idgrid">  
                        <br></br>
                        <h:outputLabel value="#{msg.c_nota}" style="color: #FF0000"/>
                        <br></br>
                        <h:outputLabel for="codigo" value="Código:" />  
                        <h:outputText id="codigo" value="#{vista_cronograma.txtcodigo}"/>  
                        <br></br>
                        <h:outputLabel value="Promoción:">
                            <h:outputLabel value="*" style="color: #FF0000"/>
                        </h:outputLabel>  
                        <p:selectOneMenu  disabled="#{vista_cronograma.deshabilitar_lista}" id="lista1" value="#{vista_cronograma.txtpromocion}" filter="true">
                            <f:selectItem itemLabel="Seleccione una promoción" itemValue="" />  
                            <f:selectItems value="#{vista_cronograma.listapromo}"/>
                            <p:ajax update="lista2"  
                                    listener="#{vista_cronograma.devolver}" />  
                            <p:ajax update="tabla"  
                                    listener="#{vista_cronograma.devolvertabla}" />
                            <p:ajax update="lista3"  
                                    listener="#{vista_cronograma.devolver4}" />
                        </p:selectOneMenu>
                        <br></br>
                        <h:outputLabel value="Módulos:">
                            <h:outputLabel value="*" style="color: #FF0000"/>
                        </h:outputLabel>  
                        <p:selectOneMenu disabled="#{vista_cronograma.deshabilitar_lista}" id="lista2" value="#{vista_cronograma.txtmodulo}" filter="true">
                            <f:selectItem itemLabel="Seleccione el módulo" itemValue="" />  
                            <f:selectItems value="#{vista_cronograma.listamodulo}">
                            </f:selectItems>
                            <p:ajax update="lista3"  
                                    listener="#{vista_cronograma.devolve2}" />  
                        </p:selectOneMenu>
                        <br></br>
                        <h:outputLabel value="Asignaturas">
                            <h:outputLabel value="*" style="color: #FF0000"/>
                        </h:outputLabel>  
                        <p:selectOneMenu disabled="#{vista_cronograma.deshabilitar_lista}" id="lista3" value="#{vista_cronograma.txtasignatuta}" filter="true">

                            <f:selectItems value="#{vista_cronograma.listasignatura}"/>
                        </p:selectOneMenu>
                        <br></br>
                        <h:outputLabel value="Aula:">
                            <h:outputLabel value="*" style="color: #FF0000"/>
                        </h:outputLabel>  
                        <p:selectOneMenu id="lista5" value="#{vista_cronograma.txtaula}" filter="true">
                            <f:selectItem itemLabel="Seleccione el aula" itemValue="" />  
                            <f:selectItems value="#{vista_cronograma.listaaula}"/>
                        </p:selectOneMenu>

                        <br></br>
                        <h:outputLabel value="Profesor:">
                            <h:outputLabel value="*" style="color: #FF0000"/>
                        </h:outputLabel>  
                        <p:selectOneMenu id="lista6" value="#{vista_cronograma.txtprofesor}" filter="true">
                            <f:selectItem itemLabel="Seleccione el profesor" itemValue="" />  
                            <f:selectItems value="#{vista_cronograma.listaprofe}"/>
                        </p:selectOneMenu>
                        <br></br>
                        <h:outputLabel value="Hora Inicio de la clase:  HH:mm">
                            <h:outputLabel value="*" style="color: #FF0000"/>
                        </h:outputLabel>  

                        <p:calendar value="#{vista_cronograma.fecha_inicio}" pattern="HH:mm" timeOnly="true" 
                                    minHour="08" maxHour="09"/> 
                        <br></br>
                        <h:outputLabel value="Hora Fin de la clase:  HH:mm">
                            <h:outputLabel value="*" style="color: #FF0000"/>
                        </h:outputLabel>  
                        <p:calendar value="#{vista_cronograma.fecha_fin}" pattern="HH:mm" timeOnly="true"  
                                    minHour="17" maxHour="22"/> 
                        <br></br>
                        <h:outputLabel value="Fecha: (aaaa/mm/dd)">
                            <h:outputLabel value="*" style="color: #FF0000"/>
                        </h:outputLabel> 
                        <p:calendar value="#{vista_cronograma.txtfechainicio}" pattern="yyyy-MM-dd" mindate="#{vista_cronograma.fechaactual}"/>
                        <br></br>
                        <h:outputText id="espera" value="#{vista_cronograma.txtcodigo_timbre}" style="color: #FF0000"/>  
                    </h:panelGrid>  
                    <p:commandButton id="Guardar" value="Guardar" action="#{vista_cronograma.insertar}" icon="ui-icon-disk" update="tabla,idgrid" onclick="return insertar()"/>  
                    <p:commandButton id="Actualizar" value="Actualizar" action="#{vista_cronograma.modificar}" icon="ui-icon-arrowrefresh-1-w" update="tabla,idgrid" onclick="return modificar()"/>
                    <p:commandButton value="#{msg.b_cancelar}"  icon="ui-icon-close" action="#{vista_cronograma.limpiar()}" update="idgrid"/>
                    <br></br>
                </p:panel> 
                <p:dataTable  emptyMessage="No exiten registros" filteredValue="#{vista_cronograma.filter}" rowKey="#{lis.codigo}" selection="#{vista_cronograma.entidad}" selectionMode="single" rows="5" paginator="true" id="tabla" value="#{vista_cronograma.lista1}" var="lis">
                    <p:ajax event="rowSelect" listener="#{vista_cronograma.seleccionarCronograma}" update=":fr"/>
                    <p:column headerText="Código" filterBy="#{lis.codigo}">
                        <h:outputText value="#{lis.codigo}"/>
                    </p:column>
                    <p:column headerText="Estado">
                        <h:outputText value="#{lis.estado_fecha}"  style="font-size:20px"/>
                    </p:column>
                    <p:column headerText="Número Aula">
                        <h:outputText value="#{lis.numero}"/>
                    </p:column>
                    <p:column headerText="Bloque">
                        <h:outputText value="#{lis.bloque}"/>
                    </p:column>
                    <p:column headerText="Piso">
                        <h:outputText value="#{lis.piso}"/>
                    </p:column>
                    <p:column headerText="Módulo">
                        <h:outputText value="#{lis.nombre_mod}"/>
                    </p:column>
                    <p:column headerText="Asignaturas">
                        <h:outputText value="#{lis.asig_codigo}"/>
                    </p:column>
                    <p:column headerText="Profesor">
                        <h:outputText value="#{lis.nombre_profesor}"/>
                    </p:column>
                    <p:column headerText="Fecha de Clases">
                        <h:outputText value="#{lis.fd_fecha}" />
                    </p:column>
                    <p:column style="width:4%">
                        <p:commandButton id="eliminar" icon="ui-icon-trash" update=":fr:tabla" action="#{vista_cronograma.eliminar(lis.codigo)}"  title="Eliminar" onclick="return eliminar()"/>
                    </p:column>
                </p:dataTable>
            </h:form> 
        </h:body>
    </ui:define>
</ui:composition>
